<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="909.9px" preserveAspectRatio="none" style="width:2443px;height:909px;background:#FFFFFF;" version="1.1" viewBox="0 0 2443 909" width="2443.5px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="102.0656" style="stroke:#181818;stroke-width:0.9;" width="9" x="255.15" y="363.2484"/><rect fill="#FFFFFF" height="54.6328" style="stroke:#181818;stroke-width:0.9;" width="9" x="255.15" y="683.8453"/><rect fill="#FFFFFF" height="7.2" style="stroke:#FFFFFF;stroke-width:0.9;" width="9" x="776.25" y="136.1813"/><line style="stroke:#181818;stroke-width:0.9;" x1="776.25" x2="776.25" y1="136.1813" y2="143.3813"/><line style="stroke:#181818;stroke-width:0.9;" x1="785.25" x2="785.25" y1="136.1813" y2="143.3813"/><line style="stroke:#181818;stroke-width:0.9;" x1="776.25" x2="785.25" y1="136.1813" y2="136.1813"/><rect fill="#FFFFFF" height="182.2148" style="stroke:#FFFFFF;stroke-width:0.9;" width="9" x="776.25" y="181.0336"/><line style="stroke:#181818;stroke-width:0.9;" x1="776.25" x2="776.25" y1="181.0336" y2="363.2484"/><line style="stroke:#181818;stroke-width:0.9;" x1="785.25" x2="785.25" y1="181.0336" y2="363.2484"/><line style="stroke:#181818;stroke-width:0.9;" x1="776.25" x2="785.25" y1="363.2484" y2="363.2484"/><rect fill="#FFFFFF" height="27.3164" style="stroke:#181818;stroke-width:0.9;" width="9" x="776.25" y="465.3141"/><rect fill="#FFFFFF" height="163.8984" style="stroke:#181818;stroke-width:0.9;" width="9" x="776.25" y="519.9469"/><rect fill="#FFFFFF" height="27.3164" style="stroke:#181818;stroke-width:0.9;" width="9" x="776.25" y="738.4781"/><rect fill="#FFFFFF" height="238.6477" style="stroke:#181818;stroke-width:0.9;" width="9" x="1262.25" y="308.6156"/><rect fill="#FFFFFF" height="163.8984" style="stroke:#181818;stroke-width:0.9;" width="9" x="1262.25" y="629.2125"/><rect fill="#FFFFFF" height="293.2805" style="stroke:#181818;stroke-width:0.9;" width="9" x="1800.45" y="281.2992"/><rect fill="#FFFFFF" height="218.5313" style="stroke:#181818;stroke-width:0.9;" width="9" x="1800.45" y="601.8961"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="18.9" x2="18.9" y1="74.3484" y2="143.3813"/><line style="stroke:#A80036;stroke-width:0.9;stroke-dasharray:1.0,4.0;" x1="18.9" x2="18.9" y1="143.3813" y2="181.0336"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="18.9" x2="18.9" y1="181.0336" y2="836.6273"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="259.2" x2="259.2" y1="74.3484" y2="143.3813"/><line style="stroke:#A80036;stroke-width:0.9;stroke-dasharray:1.0,4.0;" x1="259.2" x2="259.2" y1="143.3813" y2="181.0336"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="259.2" x2="259.2" y1="181.0336" y2="836.6273"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="436.5" x2="436.5" y1="74.3484" y2="143.3813"/><line style="stroke:#A80036;stroke-width:0.9;stroke-dasharray:1.0,4.0;" x1="436.5" x2="436.5" y1="143.3813" y2="181.0336"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="436.5" x2="436.5" y1="181.0336" y2="836.6273"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="780.3" x2="780.3" y1="74.3484" y2="143.3813"/><line style="stroke:#A80036;stroke-width:0.9;stroke-dasharray:1.0,4.0;" x1="780.3" x2="780.3" y1="143.3813" y2="181.0336"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="780.3" x2="780.3" y1="181.0336" y2="836.6273"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="1266.3" x2="1266.3" y1="74.3484" y2="143.3813"/><line style="stroke:#A80036;stroke-width:0.9;stroke-dasharray:1.0,4.0;" x1="1266.3" x2="1266.3" y1="143.3813" y2="181.0336"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="1266.3" x2="1266.3" y1="181.0336" y2="836.6273"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="1804.5" x2="1804.5" y1="74.3484" y2="143.3813"/><line style="stroke:#A80036;stroke-width:0.9;stroke-dasharray:1.0,4.0;" x1="1804.5" x2="1804.5" y1="143.3813" y2="181.0336"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="1804.5" x2="1804.5" y1="181.0336" y2="836.6273"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="2243.25" x2="2243.25" y1="74.3484" y2="143.3813"/><line style="stroke:#A80036;stroke-width:0.9;stroke-dasharray:1.0,4.0;" x1="2243.25" x2="2243.25" y1="143.3813" y2="181.0336"/><line style="stroke:#181818;stroke-width:0.45;stroke-dasharray:5.0,5.0;" x1="2243.25" x2="2243.25" y1="181.0336" y2="836.6273"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="22.5" x="5.4" y="71.5799">Bob</text><ellipse cx="19.35" cy="12.15" fill="#E2E2F0" rx="7.2" ry="7.2" style="stroke:#181818;stroke-width:0.45;"/><path d="M19.35,19.35 L19.35,43.65 M7.65,26.55 L31.05,26.55 M19.35,43.65 L7.65,57.15 M19.35,43.65 L31.05,57.15 " fill="none" style="stroke:#181818;stroke-width:0.45;"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="22.5" x="5.4" y="848.8072">Bob</text><ellipse cx="19.35" cy="859.2258" fill="#E2E2F0" rx="7.2" ry="7.2" style="stroke:#181818;stroke-width:0.45;"/><path d="M19.35,866.4258 L19.35,890.7258 M7.65,873.6258 L31.05,873.6258 M19.35,890.7258 L7.65,904.2258 M19.35,890.7258 L31.05,904.2258 " fill="none" style="stroke:#181818;stroke-width:0.45;"/><rect fill="#E2E2F0" height="28.4484" rx="2.25" ry="2.25" style="stroke:#181818;stroke-width:0.45;" width="162.9" x="178.2" y="45"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="150.3" x="184.5" y="64.3799">SocketGameClientUpdater</text><rect fill="#E2E2F0" height="28.4484" rx="2.25" ry="2.25" style="stroke:#181818;stroke-width:0.45;" width="162.9" x="178.2" y="835.7273"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="150.3" x="184.5" y="855.1072">SocketGameClientUpdater</text><rect fill="#E2E2F0" height="28.4484" rx="2.25" ry="2.25" style="stroke:#181818;stroke-width:0.45;" width="173.7" x="350.1" y="45"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="161.1" x="356.4" y="64.3799">SocketGameClientController</text><rect fill="#E2E2F0" height="28.4484" rx="2.25" ry="2.25" style="stroke:#181818;stroke-width:0.45;" width="173.7" x="350.1" y="835.7273"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="161.1" x="356.4" y="855.1072">SocketGameClientController</text><rect fill="#E2E2F0" height="28.4484" rx="2.25" ry="2.25" style="stroke:#181818;stroke-width:0.45;" width="134.1" x="713.7" y="45"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="121.5" x="720" y="64.3799">ClientSocketManager</text><rect fill="#E2E2F0" height="28.4484" rx="2.25" ry="2.25" style="stroke:#181818;stroke-width:0.45;" width="134.1" x="713.7" y="835.7273"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="121.5" x="720" y="855.1072">ClientSocketManager</text><rect fill="#E2E2F0" height="28.4484" rx="2.25" ry="2.25" style="stroke:#181818;stroke-width:0.45;" width="139.5" x="1197" y="45"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="126.9" x="1203.3" y="64.3799">ServerSocketManager</text><rect fill="#E2E2F0" height="28.4484" rx="2.25" ry="2.25" style="stroke:#181818;stroke-width:0.45;" width="139.5" x="1197" y="835.7273"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="126.9" x="1203.3" y="855.1072">ServerSocketManager</text><rect fill="#E2E2F0" height="28.4484" rx="2.25" ry="2.25" style="stroke:#181818;stroke-width:0.45;" width="168.3" x="1720.8" y="45"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="155.7" x="1727.1" y="64.3799">SocketServerGameUpdater</text><rect fill="#E2E2F0" height="28.4484" rx="2.25" ry="2.25" style="stroke:#181818;stroke-width:0.45;" width="168.3" x="1720.8" y="835.7273"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="155.7" x="1727.1" y="855.1072">SocketServerGameUpdater</text><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="37.8" x="2221.65" y="71.5799">Server</text><ellipse cx="2243.25" cy="44.1" fill="#E2E2F0" rx="10.8" ry="10.8" style="stroke:#181818;stroke-width:0.45;"/><line style="stroke:#181818;stroke-width:0.45;" x1="2232.45" x2="2254.05" y1="56.7" y2="56.7"/><text fill="#000000" font-family="sans-serif" font-size="12.6" lengthAdjust="spacing" textLength="37.8" x="2221.65" y="848.8072">Server</text><ellipse cx="2243.25" cy="865.9758" fill="#E2E2F0" rx="10.8" ry="10.8" style="stroke:#181818;stroke-width:0.45;"/><line style="stroke:#181818;stroke-width:0.45;" x1="2232.45" x2="2254.05" y1="878.5758" y2="878.5758"/><rect fill="#FFFFFF" height="102.0656" style="stroke:#181818;stroke-width:0.9;" width="9" x="255.15" y="363.2484"/><rect fill="#FFFFFF" height="54.6328" style="stroke:#181818;stroke-width:0.9;" width="9" x="255.15" y="683.8453"/><rect fill="#FFFFFF" height="7.2" style="stroke:#FFFFFF;stroke-width:0.9;" width="9" x="776.25" y="136.1813"/><line style="stroke:#181818;stroke-width:0.9;" x1="776.25" x2="776.25" y1="136.1813" y2="143.3813"/><line style="stroke:#181818;stroke-width:0.9;" x1="785.25" x2="785.25" y1="136.1813" y2="143.3813"/><line style="stroke:#181818;stroke-width:0.9;" x1="776.25" x2="785.25" y1="136.1813" y2="136.1813"/><rect fill="#FFFFFF" height="182.2148" style="stroke:#FFFFFF;stroke-width:0.9;" width="9" x="776.25" y="181.0336"/><line style="stroke:#181818;stroke-width:0.9;" x1="776.25" x2="776.25" y1="181.0336" y2="363.2484"/><line style="stroke:#181818;stroke-width:0.9;" x1="785.25" x2="785.25" y1="181.0336" y2="363.2484"/><line style="stroke:#181818;stroke-width:0.9;" x1="776.25" x2="785.25" y1="363.2484" y2="363.2484"/><rect fill="#FFFFFF" height="27.3164" style="stroke:#181818;stroke-width:0.9;" width="9" x="776.25" y="465.3141"/><rect fill="#FFFFFF" height="163.8984" style="stroke:#181818;stroke-width:0.9;" width="9" x="776.25" y="519.9469"/><rect fill="#FFFFFF" height="27.3164" style="stroke:#181818;stroke-width:0.9;" width="9" x="776.25" y="738.4781"/><rect fill="#FFFFFF" height="238.6477" style="stroke:#181818;stroke-width:0.9;" width="9" x="1262.25" y="308.6156"/><rect fill="#FFFFFF" height="163.8984" style="stroke:#181818;stroke-width:0.9;" width="9" x="1262.25" y="629.2125"/><rect fill="#FFFFFF" height="293.2805" style="stroke:#181818;stroke-width:0.9;" width="9" x="1800.45" y="281.2992"/><rect fill="#FFFFFF" height="218.5313" style="stroke:#181818;stroke-width:0.9;" width="9" x="1800.45" y="601.8961"/><path d="M4.5,87.8484 L4.5,111.2484 L2259,111.2484 L2259,96.8484 L2250,87.8484 L4.5,87.8484 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.45;"/><path d="M2250,87.8484 L2250,96.8484 L2259,96.8484 L2250,87.8484 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.45;"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="52.2" x="1101.825" y="104.494">During init</text><polygon fill="#181818" points="765.45,132.5813,774.45,136.1813,765.45,139.7813,769.05,136.1813" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="259.65" x2="770.85" y1="136.1813" y2="136.1813"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="183.6" x="265.95" y="131.8104">receive(GameUpdaterPacket.class)</text><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacing" textLength="2.7" x="1129.95" y="166.2583">Â </text><path d="M4.5,185.5336 L4.5,208.9336 L2259,208.9336 L2259,194.5336 L2250,185.5336 L4.5,185.5336 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.45;"/><path d="M2250,185.5336 L2250,194.5336 L2259,194.5336 L2250,185.5336 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.45;"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="190.8" x="1032.525" y="202.1792">Alice completes a common objective</text><path d="M2247.3,218.25 L2247.3,256.05 L2437.2,256.05 L2437.2,227.25 L2428.2,218.25 L2247.3,218.25 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.45;"/><path d="M2428.2,218.25 L2428.2,227.25 L2437.2,227.25 L2428.2,218.25 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.45;"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="159.3" x="2252.7" y="234.8956">Here the server broadcasts the</text><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="171" x="2252.7" y="249.612">change to everyone, not just Bob</text><polygon fill="#181818" points="1819.35,277.6992,1810.35,281.2992,1819.35,284.8992,1815.75,281.2992" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="1813.95" x2="2242.35" y1="281.2992" y2="281.2992"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="416.7" x="1824.75" y="276.9284">updateAchievedCommonGoal(Type.ALL_CORNERS, List.of(oldPlayers, "Alice"))</text><polygon fill="#181818" points="1281.15,305.0156,1272.15,308.6156,1281.15,312.2156,1277.55,308.6156" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="1275.75" x2="1799.55" y1="308.6156" y2="308.6156"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="512.1" x="1286.55" y="304.2448">send(new UpdateAchievedCommonGoalPacket(Type.ALL_CORNERS, List.of(oldPlayers, "Alice")))</text><polygon fill="#181818" points="795.15,332.332,786.15,335.932,795.15,339.532,791.55,335.932" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;stroke-dasharray:2.0,2.0;" x1="789.75" x2="1261.35" y1="335.932" y2="335.932"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="455.4" x="800.55" y="331.5612">UpdateAchievedCommonGoalPacket(Type.ALL_CORNERS, List.of(oldPlayers, "Alice"))</text><polygon fill="#181818" points="274.05,359.6484,265.05,363.2484,274.05,366.8484,270.45,363.2484" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="268.65" x2="779.85" y1="363.2484" y2="363.2484"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="495" x="279.45" y="358.8776">returns UpdateAchievedCommonGoalPacket(Type.ALL_CORNERS, List.of(oldPlayers, "Alice"))</text><path d="M149.4,374.9484 L149.4,412.7484 L369.9,412.7484 L369.9,383.9484 L360.9,374.9484 L149.4,374.9484 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.45;"/><path d="M360.9,374.9484 L360.9,383.9484 L369.9,383.9484 L360.9,374.9484 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.45;"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="198" x="154.8" y="391.594">Finds actual CommonGoal and Player</text><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="179.1" x="154.8" y="406.3104">instances from the given identifiers</text><ellipse cx="18.9" cy="437.3227" fill="none" rx="3.6" ry="3.6" style="stroke:#181818;stroke-width:1.35;"/><polygon fill="#181818" points="34.2,434.3977,25.2,437.9977,34.2,441.5977,30.6,437.9977" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;stroke-dasharray:2.0,2.0;" x1="32.4" x2="254.25" y1="437.9977" y2="437.9977"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="214.2" x="34.65" y="433.6269">receives CommonGoal update via listener</text><polygon fill="#181818" points="765.45,461.7141,774.45,465.3141,765.45,468.9141,769.05,465.3141" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="259.65" x2="770.85" y1="465.3141" y2="465.3141"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="26.1" x="265.95" y="460.9433">ack()</text><polygon fill="#181818" points="1251.45,489.0305,1260.45,492.6305,1251.45,496.2305,1255.05,492.6305" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;stroke-dasharray:2.0,2.0;" x1="780.75" x2="1256.85" y1="492.6305" y2="492.6305"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="18.9" x="787.05" y="488.2597">ack</text><polygon fill="#181818" points="765.45,516.3469,774.45,519.9469,765.45,523.5469,769.05,519.9469" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="259.65" x2="770.85" y1="519.9469" y2="519.9469"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="183.6" x="265.95" y="515.5761">receive(GameUpdaterPacket.class)</text><polygon fill="#181818" points="1789.65,543.6633,1798.65,547.2633,1789.65,550.8633,1793.25,547.2633" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="1266.75" x2="1795.05" y1="547.2633" y2="547.2633"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="36" x="1273.05" y="542.8925">returns</text><polygon fill="#181818" points="2232.45,570.9797,2241.45,574.5797,2232.45,578.1797,2236.05,574.5797" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="1804.95" x2="2237.85" y1="574.5797" y2="574.5797"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="36" x="1811.25" y="570.2089">returns</text><polygon fill="#181818" points="1819.35,598.2961,1810.35,601.8961,1819.35,605.4961,1815.75,601.8961" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="1813.95" x2="2242.35" y1="601.8961" y2="601.8961"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="197.1" x="1824.75" y="597.5253">updatePlayerScore("Alice", score: 10)</text><polygon fill="#181818" points="1281.15,625.6125,1272.15,629.2125,1281.15,632.8125,1277.55,629.2125" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="1275.75" x2="1799.55" y1="629.2125" y2="629.2125"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="292.5" x="1286.55" y="624.8417">send(new UpdatePlayerScorePacket("Alice", score: 10))</text><polygon fill="#181818" points="795.15,652.9289,786.15,656.5289,795.15,660.1289,791.55,656.5289" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;stroke-dasharray:2.0,2.0;" x1="789.75" x2="1261.35" y1="656.5289" y2="656.5289"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="235.8" x="800.55" y="652.1581">UpdatePlayerScorePacket("Alice", score: 10)</text><polygon fill="#181818" points="274.05,680.2453,265.05,683.8453,274.05,687.4453,270.45,683.8453" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="268.65" x2="779.85" y1="683.8453" y2="683.8453"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="275.4" x="279.45" y="679.4745">returns UpdatePlayerScorePacket("Alice", score: 10)</text><ellipse cx="18.9" cy="710.4867" fill="none" rx="3.6" ry="3.6" style="stroke:#181818;stroke-width:1.35;"/><polygon fill="#181818" points="34.2,707.5617,25.2,711.1617,34.2,714.7617,30.6,711.1617" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;stroke-dasharray:2.0,2.0;" x1="32.4" x2="254.25" y1="711.1617" y2="711.1617"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="171.9" x="34.65" y="706.7909">receives score update via listener</text><polygon fill="#181818" points="765.45,734.8781,774.45,738.4781,765.45,742.0781,769.05,738.4781" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="259.65" x2="770.85" y1="738.4781" y2="738.4781"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="26.1" x="265.95" y="734.1073">ack()</text><polygon fill="#181818" points="1251.45,762.1945,1260.45,765.7945,1251.45,769.3945,1255.05,765.7945" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;stroke-dasharray:2.0,2.0;" x1="780.75" x2="1256.85" y1="765.7945" y2="765.7945"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="18.9" x="787.05" y="761.4237">ack</text><polygon fill="#181818" points="1789.65,789.5109,1798.65,793.1109,1789.65,796.7109,1793.25,793.1109" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="1266.75" x2="1795.05" y1="793.1109" y2="793.1109"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="36" x="1273.05" y="788.7401">returns</text><polygon fill="#181818" points="2232.45,816.8273,2241.45,820.4273,2232.45,824.0273,2236.05,820.4273" style="stroke:#181818;stroke-width:0.9;"/><line style="stroke:#181818;stroke-width:0.9;" x1="1804.95" x2="2237.85" y1="820.4273" y2="820.4273"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacing" textLength="36" x="1811.25" y="816.0565">returns</text><!--MD5=[5b26b2c2d24aef88b7e8d4d81deadbd0]
@startuml
actor       Bob                        as client
participant SocketGameClientUpdater    as clientGameUpdater
participant SocketGameClientController as clientGameController
participant ClientSocketManager        as clientSocketManager
participant ServerSocketManager        as serverSocketManager
participant SocketServerGameUpdater    as serverGameUpdater
entity      Server                     as server

note across: During init
clientGameUpdater -> clientSocketManager ++ : receive(GameUpdaterPacket.class)

... ...
note across: Alice completes a common objective

note right of server
    Here the server broadcasts the
    change to everyone, not just Bob
end note

serverGameUpdater <- server ++ : updateAchievedCommonGoal(Type.ALL_CORNERS, List.of(oldPlayers, "Alice"))
serverSocketManager <- serverGameUpdater ++ : send(new UpdateAchievedCommonGoalPacket(Type.ALL_CORNERS, List.of(oldPlayers, "Alice")))
clientSocketManager <- - serverSocketManager : UpdateAchievedCommonGoalPacket(Type.ALL_CORNERS, List.of(oldPlayers, "Alice"))
clientGameUpdater <- clientSocketManager - -++ : returns UpdateAchievedCommonGoalPacket(Type.ALL_CORNERS, List.of(oldPlayers, "Alice"))
note over clientGameUpdater
Finds actual CommonGoal and Player 
instances from the given identifiers
end note
client o<- - clientGameUpdater : receives CommonGoal update via listener
clientGameUpdater -> clientSocketManager - -++ : ack()
clientSocketManager - -> serverSocketManager - - : ack
clientGameUpdater -> clientSocketManager ++ : receive(GameUpdaterPacket.class)
serverSocketManager -> serverGameUpdater - - : returns
serverGameUpdater -> server - - : returns

serverGameUpdater <- server ++ : updatePlayerScore("Alice", score: 10)
serverSocketManager <- serverGameUpdater ++ : send(new UpdatePlayerScorePacket("Alice", score: 10))
clientSocketManager <- - serverSocketManager : UpdatePlayerScorePacket("Alice", score: 10)
clientGameUpdater <- clientSocketManager - -++ : returns UpdatePlayerScorePacket("Alice", score: 10)
client o<- - clientGameUpdater : receives score update via listener
clientGameUpdater -> clientSocketManager - -++ : ack()
clientSocketManager - -> serverSocketManager - - : ack
serverSocketManager -> serverGameUpdater - - : returns
serverGameUpdater -> server - - : returns

@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: it
Country: IT
--></g></svg>